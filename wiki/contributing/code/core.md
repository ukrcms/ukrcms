Розвиток ядра
====
Ядро - головна складова всієї системи.


*Для ознайомлення з даним розділом ви маєте знати такі терміни:*

* [Cинглтон](/glossary#Cинглтон)
* [Application](/glossary#Application)
* [Ядро](/glossary#Ядро)


### Uc - клас синглтон 

Клас синглтон, виконує такі функції:

* реєстрація автолодера для автоматичного завантаження класів пакунків 
  та класів ядра системи
* ініціалізації сайту з певними налаштуваннями
* доступ до обгортки сайту `App`  

Клас Uc знаходиться у файлі `Uc.php`

Зверніть увагу. *Цей клас знаходиться в глобальному просторі імен, 
всі інші файли ядра знаходяться в просторі імен Uc*

### App - application (обгортка сайту)
Цей клас завантажує конфігурацію для подальшої роботи апліцкаціх
Включає в себе:
* url - клас, який працює з посиланням
* theme - клас, який працює з темою сайту
* db - клас, який працює з базою даних
* а також інші компоненти...

###  Db - обгортка над класом __PDO__
Цей клас знаходиться в глобальному просторі імен.
Зміни в цьому класі можуть бути потенційно небезпечними для роботи, залежних від нього класах.
Цей клас знаходиться у файлі `Ub.php`

Застосування класу:
* створення та закриття підключення бази даних в аплікації.
* виконаня запитів в базу даних з допомогою транзакцій.

Клас ініціалізується в автолодері при старті системи з параметрами, які вказані в конфігу, наприклад:
```
      'db' => array(
        'dsn' => 'mysql:host=localhost;dbname=uc',
        'username' => 'root',
        'password' => '1111',
        'tablePrefix' => 'uc_',
      ),
```

### Theme - клас для роботи з темою системи.
Клас ініціалізується в автолодері при старті системи з параметрами, які вказані в конфігу, наприклад:
```
      'theme' => array(
        'themeName' => 'azmind',
        'layout' => 'main',
        'basePath' => dirname(__FILE__) . '/../../themes',
        'baseUrl' => '/themes',
      ),
```
Теми знаходить в каталозі themes/<theme>


### Controller - базовий клас для контроллера пакунка.
В реалізації своїх контроллерів потрібно включати всю логіку __Пакунка__, наприклад витягнення даних із бази даних і т.д.
Приклади реалізації контроллерів можна переглянути в каталозі ukrcms/bundles/<bundle>/Controller.php

### Url - клас для роботи з посиланнями
Клас ініціалізується в автолодері при старті системи з параметрами, які вказані в конфігу, наприклад:
```
      'url' => array(
        'rules' => array(
          '/admin-panel/' => 'ub/admin/index',
          '/admin-panel/<controller:.*>/<action:[^/]+>' => '<controller>/admin/<action>',
          '/rss.xml' => 'ub/simpleblog/posts/rss',
          '/' => 'ub/simpleblog/posts/mainpage',
          '/<catsef>-c<catpk>/<postsef>-p<postpk:\d+>.html' => 'ub/simpleblog/posts/view',
          '/<catsef>-c<catpk:\d+>/' => 'ub/simpleblog/posts/category',
          '/<sef>.html' => 'ub/site/pages/view',
          '/<controller:.*>/<action:[^/]+>' => '<controller>/<action>',
        ),
        'baseUrl' => '/ukrcms/blog-pack'
      ),
```
В конфігу потрібно вказати правила, за якими будуть здійснюватись переходи до контроллерів відповідних пакунків, наприклад:
```
  '/admin-panel/' => 'ub/admin/index'
```
вказує на те що при переході по посиланню <site_name>/ukrcms/blog-pack/admin-panel/, буде здійснений перехід до контроллера, який знаходить в неймспейсі ub/admin із екшином index.

